{"version":3,"sources":["components/person.js","components/filter.js","components/personForm.js","components/notification.js","services/persons.js","App.js","index.js"],"names":["Person","person","handleDelete","name","number","className","onClick","Filter","filter","handleFilterChange","value","onChange","PersonForm","props","onSubmit","addPerson","newName","handleNameChange","newNumber","handleNumberChange","type","Notification","message","baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","PersonList","persons","filteredPersons","map","key","App","useState","setPersons","setNewName","setNewNumber","setFilter","setFilteredPersons","notificationMessage","setNotificationMessage","useEffect","PersonDB","initialPersons","console","log","catch","error","handleUpdate","oldPerson","find","p","updatedPerson","returnedPerson","notification","resetNotification","setTimeout","handleSearchInput","event","target","filtered","toLowerCase","includes","preventDefault","personObject","some","window","confirm","concat","deletedPerson","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.3ee8aa96.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Person = ({ person, handleDelete }) => (\r\n    <li>{person.name} | {person.number} | <button className='delButton' onClick={() => handleDelete(person)}>delete</button>\r\n    </li>\r\n  )\r\n\r\nexport default Person\r\n","import React from 'react'\r\n\r\nconst Filter = ({filter, handleFilterChange}) => (\r\n    <div>\r\n      <form>\r\n        filter shown with: <input value={filter} onChange={handleFilterChange} />\r\n      </form>\r\n    </div>\r\n  )\r\n\r\nexport default Filter\r\n","import React from 'react'\r\n\r\nconst PersonForm = (props) => (\r\n  \r\n  <form onSubmit={props.addPerson}>\r\n    <div>\r\n      name: <input value={props.newName} onChange={props.handleNameChange} />\r\n    </div>\r\n    <div>\r\n      number: <input value={props.newNumber} onChange={props.handleNumberChange} />\r\n    </div>\r\n    <div>\r\n      <button type=\"submit\">add</button>\r\n    </div>\r\n  </form>\r\n)\r\n\r\n\r\nexport default PersonForm\r\n","import React from 'react'\r\n\r\nconst Notification = ({ message, className }) => {\r\n  if (message == null) {\r\n    return null\r\n  }\r\n  return (\r\n    <div className={className}>\r\n      {message}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Notification\r\n","import axios from 'axios'\r\nconst baseUrl = 'api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n  // full form:\r\n  // return request.then(response => {\r\n    // return response.data\r\n  }\r\n\r\nconst remove = id => {\r\n  const request = axios.delete(`${baseUrl}/${id}`)\r\n  return request.then(response => response.data)\r\n}\r\n\r\n\r\nexport default { getAll, create, update, remove }\r\n","import React, { useState, useEffect } from 'react'\r\nimport './app.css'\r\nimport Person from './components/person'\r\nimport Filter from './components/filter'\r\nimport PersonForm from './components/personForm'\r\nimport Notification from './components/notification'\r\n\r\nimport PersonDB from './services/persons'\r\n\r\n\r\n\r\nconst PersonList = ({ filter, persons, filteredPersons, handleDelete }) => (\r\n  <div className=\"personList\">\r\n    {(filter === '')\r\n      ? persons.map(person => (\r\n          <Person\r\n            key={person.name}\r\n            person={person}\r\n            handleDelete={handleDelete}\r\n          />\r\n        ))\r\n      : filteredPersons.map(person => (\r\n          <Person\r\n             key={person.name}\r\n             person={person}\r\n             handleDelete={handleDelete}\r\n          />\r\n      ))}\r\n  </div>\r\n)\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons] = useState([])\r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('')\r\n  const [ filter, setFilter ] = useState('')\r\n  const [ filteredPersons, setFilteredPersons ] = useState(persons)\r\n  const [ notificationMessage, setNotificationMessage ] =useState(null)\r\n\r\n  useEffect(() => {\r\n    PersonDB\r\n     .getAll()\r\n     .then((initialPersons) => {\r\n       console.log('PersonDB.getall()');\r\n       setPersons(initialPersons)\r\n\r\n     })\r\n     .catch((error) => {\r\n       console.log(error.response.data)\r\n     })\r\n  }, [])\r\n\r\n\r\n  const addPerson = (event) => {\r\n    event.preventDefault()\r\n\r\n    const personObject = {\r\n      name: newName,\r\n      number: newNumber,\r\n    }\r\n    // array method .some returns true if name match found\r\n    const alreadyExists = persons.some((person) => person.name === newName)\r\n\r\n    if (!alreadyExists) {\r\n      // adding to db:\r\n      PersonDB\r\n        .create(personObject)\r\n        .then(returnedPerson => {\r\n          setPersons(persons.concat(returnedPerson))\r\n\r\n          setNotificationMessage({\r\n            notification: `added ${returnedPerson.name} to phonebook.`\r\n          })\r\n          resetNotification()\r\n\r\n          // reset inputs\r\n          setNewName('')\r\n          setNewNumber('')\r\n        })\r\n        .catch((error) => {\r\n          console.log(error.response.data)\r\n        })\r\n\r\n    } else {\r\n      const confirmUpdate = window.confirm(`${newName} is already in the phonebook. Update number?`)\r\n      if (confirmUpdate) {\r\n        handleUpdate(newName)\r\n      }\r\n    }\r\n  } // addPerson\r\n\r\n  const handleNameChange = (event) => setNewName(event.target.value)\r\n\r\n  const handleNumberChange = (event) => setNewNumber(event.target.value)\r\n\r\n  const handleFilterChange = (event) => {\r\n    setFilter(event.target.value)\r\n    const filtered = persons.filter((person) =>\r\n      // Check if name is in the phonebook\r\n      person.name.toLowerCase().includes(event.target.value.toLowerCase())\r\n    )\r\n\r\n    setFilteredPersons(filtered)\r\n  }\r\n\r\n  const handleDelete = (deletedPerson) => {\r\n    const confirmDelete = window.confirm(`Delete entry for ${deletedPerson.name}?`)\r\n    if (confirmDelete) {\r\n      // removing from db:\r\n      PersonDB\r\n        .remove(deletedPerson.id)\r\n        .then(() => {\r\n          setPersons(persons.filter(person => person.id !== deletedPerson.id))\r\n\r\n          setNotificationMessage({\r\n            notification: `${deletedPerson.name} removed from phonebook.`\r\n          })\r\n          resetNotification()\r\n        })\r\n    }\r\n  }\r\n\r\n  const handleUpdate = (name) => {\r\n    const oldPerson = persons.find(p => p.name === name)\r\n    const updatedPerson = {...oldPerson, number: newNumber}\r\n\r\n    PersonDB\r\n      .update(updatedPerson.id, updatedPerson)\r\n      .then(returnedPerson => {\r\n        setPersons(\r\n          persons.map(\r\n            person =>\r\n             person.id !== oldPerson.id ? person: returnedPerson\r\n          )\r\n        )\r\n        setNotificationMessage({\r\n          notification: `${returnedPerson.name} number updated to ${returnedPerson.number}.`\r\n        })\r\n        resetNotification()\r\n\r\n      })\r\n      .catch(error => {\r\n        setNotificationMessage({\r\n          error: `${oldPerson.name} was already deleted from server`,\r\n        })\r\n        resetNotification()\r\n        setPersons(persons.filter(p => p.id !== oldPerson.id))\r\n      })\r\n\r\n    setNewName('')\r\n    setNewNumber('')\r\n  }\r\n\r\n  const resetNotification = () => {\r\n    return (\r\n      setTimeout(() => {\r\n        setNotificationMessage(null)\r\n      }, 5000)\r\n    )\r\n  }\r\n\r\n\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification\r\n        message={notificationMessage?.notification || notificationMessage?.error}\r\n        className={notificationMessage?.notification ? 'notification' : 'error'}\r\n        resetNotification={resetNotification}\r\n      />\r\n      <Filter\r\n        handleSearchInput={filter}\r\n        handleFilterChange={handleFilterChange}\r\n      />\r\n      <h3>add a new</h3>\r\n      <PersonForm\r\n        newName={newName}\r\n        newNumber={newNumber}\r\n        addPerson={addPerson}\r\n        handleNameChange={handleNameChange}\r\n        handleNumberChange={handleNumberChange}\r\n      />\r\n      <h3>Numbers</h3>\r\n       <PersonList\r\n         filter={filter}\r\n         persons={persons}\r\n         filteredPersons={filteredPersons}\r\n         handleDelete={handleDelete}\r\n       />\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n//import './index.css'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}